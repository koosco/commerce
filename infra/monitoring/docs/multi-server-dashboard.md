# ì—¬ëŸ¬ ì„œë²„ ëª¨ë‹ˆí„°ë§ ëŒ€ì‹œë³´ë“œ ê°€ì´ë“œ

## âœ… Community ëŒ€ì‹œë³´ë“œ ê·¸ëŒ€ë¡œ ì‚¬ìš© ê°€ëŠ¥!

**ê²°ë¡ **: ëŒ€ë¶€ë¶„ì˜ Grafana Community ëŒ€ì‹œë³´ë“œëŠ” ì—¬ëŸ¬ ì„œë²„ë¥¼ ì§€ì›í•˜ë„ë¡ ì„¤ê³„ë˜ì–´ ìˆì–´ **ê·¸ëŒ€ë¡œ Importí•˜ë©´ ë©ë‹ˆë‹¤**.

---

## ğŸ¯ ì‘ë™ ì›ë¦¬

### Prometheusê°€ ì—¬ëŸ¬ ì„œë²„ ë©”íŠ¸ë¦­ ìˆ˜ì§‘

```yaml
# prometheus.yml
scrape_configs:
  - job_name: "node-exporter"
    static_configs:
      - targets: ["172.31.32.89:9100"]
        labels:
          instance: "kafka-server" # â† ì´ ë¼ë²¨ì´ í•µì‹¬!

      - targets: ["172.31.46.94:9100"]
        labels:
          instance: "stress-server"

      - targets: ["172.31.43.230:9100"]
        labels:
          instance: "microservice-server"
```

### Community ëŒ€ì‹œë³´ë“œê°€ ìë™ìœ¼ë¡œ ê°ì§€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Node Exporter Full (Dashboard 1860)    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ìë™ ìƒì„±ëœ ë³€ìˆ˜:                        â”‚
â”‚ Host: $node = label_values(instance)    â”‚
â”‚                                         â”‚
â”‚ ì¿¼ë¦¬ ì˜ˆì‹œ:                               â”‚
â”‚ node_cpu_seconds_total{instance="$node"}â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**â†’ Importë§Œ í•˜ë©´ ìë™ìœ¼ë¡œ ëª¨ë“  ì„œë²„ê°€ ë“œë¡­ë‹¤ìš´ì— ë‚˜íƒ€ë‚¨!**

---

## ğŸ“Š ì‹¤ì œ ì‚¬ìš© ì˜ˆì‹œ

### Node Exporter Full (1860) Import í›„

#### Before Import

```
Prometheus targets:
âœ… kafka-server (172.31.32.89)
âœ… stress-server (172.31.46.94)
âœ… microservice-server (172.31.43.230)
```

#### After Import (ìë™!)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Node Exporter Full                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Host: [kafka-server â–¼]  â† ìë™ ìƒì„±ë¨!       â”‚
â”‚       - All                                  â”‚
â”‚       - kafka-server                         â”‚
â”‚       - stress-server                        â”‚
â”‚       - microservice-server                  â”‚
â”‚                                              â”‚
â”‚ Job: [node-kafka â–¼]                         â”‚
â”‚      - All                                   â”‚
â”‚      - node-kafka                            â”‚
â”‚      - node-stress                           â”‚
â”‚      - node-microservice                     â”‚
â”‚                                              â”‚
â”‚ [ì„ íƒí•œ ì„œë²„ì˜ CPU, ë©”ëª¨ë¦¬, ë””ìŠ¤í¬ í‘œì‹œ]       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ì¶”ê°€ ì„¤ì • í•„ìš” ì—†ìŒ!**

---

## ğŸ”§ ê²€ì¦: Community ëŒ€ì‹œë³´ë“œì˜ ë³€ìˆ˜ í™•ì¸

### Node Exporter Full (1860)ì˜ ë‚´ì¥ ë³€ìˆ˜

ëŒ€ì‹œë³´ë“œ Import í›„ Settings â†’ Variables í™•ì¸:

#### ë³€ìˆ˜ 1: node

```yaml
Name: node
Type: Query
Query: label_values(node_uname_info, instance)
Regex:
Multi-value: true
Include All: true
```

â†’ ëª¨ë“  Node Exporter ì¸ìŠ¤í„´ìŠ¤ ìë™ ê°ì§€

#### ë³€ìˆ˜ 2: job

```yaml
Name: job
Type: Query
Query: label_values(node_uname_info, job)
Multi-value: true
Include All: true
```

â†’ ëª¨ë“  job ìë™ ê°ì§€

#### íŒ¨ë„ ì¿¼ë¦¬ ì˜ˆì‹œ

```promql
# CPU Usage
100 - (avg by (instance) (rate(node_cpu_seconds_total{mode="idle",instance=~"$node"}[5m])) * 100)

# Memory Usage
100 - ((node_memory_MemAvailable_bytes{instance=~"$node"} * 100) / node_memory_MemTotal_bytes{instance=~"$node"})
```

**â†’ `instance=~"$node"` ë¶€ë¶„ì´ ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ í•„í„°ë§!**

---

## âœ… ê·¸ëŒ€ë¡œ ì‚¬ìš© ê°€ëŠ¥í•œ ëŒ€ì‹œë³´ë“œ ëª©ë¡

### ì¸í”„ë¼ ëª¨ë‹ˆí„°ë§

| ID        | ëŒ€ì‹œë³´ë“œ                     | ë©€í‹° ì„œë²„ ì§€ì› | ë¹„ê³                       |
| --------- | ---------------------------- | -------------- | ------------------------- |
| **1860**  | Node Exporter Full           | âœ… ì™„ë²½ ì§€ì›   | `$node`, `$job` ë³€ìˆ˜ ë‚´ì¥ |
| **11074** | Node Exporter                | âœ… ì™„ë²½ ì§€ì›   | ì‹¬í”Œ ë²„ì „                 |
| **405**   | Node Exporter Server Metrics | âœ… ì™„ë²½ ì§€ì›   | ì„œë²„ ë¹„êµì— ìµœì í™”        |
| **193**   | Docker & Host                | âœ… ì™„ë²½ ì§€ì›   | ì»¨í…Œì´ë„ˆ + í˜¸ìŠ¤íŠ¸         |

### ì• í”Œë¦¬ì¼€ì´ì…˜ ëª¨ë‹ˆí„°ë§

| ID        | ëŒ€ì‹œë³´ë“œ               | ë©€í‹° ì„œë¹„ìŠ¤ ì§€ì› | ë¹„ê³                              |
| --------- | ---------------------- | ---------------- | -------------------------------- |
| **11378** | Spring Boot Monitor    | âœ… ì™„ë²½ ì§€ì›     | `$application`, `$instance` ë³€ìˆ˜ |
| **12856** | Spring Boot Statistics | âœ… ì™„ë²½ ì§€ì›     | ì„œë¹„ìŠ¤ ì„ íƒ ê°€ëŠ¥                 |
| **4701**  | JVM Micrometer         | âœ… ì™„ë²½ ì§€ì›     | `$application` ë³€ìˆ˜              |

---

## ğŸ¨ ë³€ìˆ˜ í™œìš© íŒ¨í„´

### íŒ¨í„´ 1: Single Select (í•˜ë‚˜ë§Œ ì„ íƒ)

```
Host: [kafka-server â–¼]

í•˜ë‚˜ì˜ ì„œë²„ë§Œ ì§‘ì¤‘ ëª¨ë‹ˆí„°ë§
```

### íŒ¨í„´ 2: Multi Select (ì—¬ëŸ¬ ê°œ ì„ íƒ)

```
Host: [kafka-server, stress-server â–¼]

ì—¬ëŸ¬ ì„œë²„ ë¹„êµ ë¶„ì„
```

### íŒ¨í„´ 3: All (ì „ì²´ ì„ íƒ)

```
Host: [All â–¼]

ëª¨ë“  ì„œë²„ í†µí•© ë·°
```

### ë³€ìˆ˜ ì¡°í•© ì‚¬ìš©

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Job: [All â–¼]                       â”‚
â”‚ Host: [microservice-server â–¼]     â”‚
â”‚                                    â”‚
â”‚ íŠ¹ì • ì„œë²„ì˜ ëª¨ë“  ì‘ì—… ëª¨ë‹ˆí„°ë§       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ” Community ëŒ€ì‹œë³´ë“œ ì„ íƒ ì‹œ ì²´í¬í¬ì¸íŠ¸

### Import ì „ í™•ì¸ ì‚¬í•­

#### 1. ë³€ìˆ˜ ì§€ì› í™•ì¸

```
ëŒ€ì‹œë³´ë“œ ìƒì„¸ í˜ì´ì§€ì—ì„œ:
- "Variables" ì„¹ì…˜ í™•ì¸
- instance, node, host ë“±ì˜ ë³€ìˆ˜ ì¡´ì¬ ì—¬ë¶€
```

#### 2. ë©”íŠ¸ë¦­ í˜¸í™˜ì„± í™•ì¸

```
Required metrics:
- node_cpu_seconds_total
- node_memory_MemAvailable_bytes
- node_filesystem_avail_bytes

â†’ Node Exporterê°€ ì œê³µí•˜ëŠ” í‘œì¤€ ë©”íŠ¸ë¦­
```

#### 3. ë¦¬ë·° ë° ë‹¤ìš´ë¡œë“œ ìˆ˜ í™•ì¸

```
ì¸ê¸° ëŒ€ì‹œë³´ë“œ = ê²€ì¦ëœ ëŒ€ì‹œë³´ë“œ
- Downloads: 100ë§Œ+ â†’ ì‹ ë¢°ë„ ë†’ìŒ
- Reviews: ë³„ì  4.5+ â†’ í’ˆì§ˆ ë³´ì¥
```

---

## ğŸ’¡ ì‹¤ì „ ì‹œë‚˜ë¦¬ì˜¤

### ì‹œë‚˜ë¦¬ì˜¤ 1: ìƒˆë¡œìš´ ì„œë²„ ì¶”ê°€

**ìƒí™©**: 4ë²ˆì§¸ ì„œë²„ ì¶”ê°€ (172.31.50.100)

#### ê¸°ì¡´ ë°©ì‹ (ì˜ëª»ë¨)

```
âŒ ìƒˆë¡œìš´ ëŒ€ì‹œë³´ë“œë¥¼ ë˜ Import?
âŒ ê¸°ì¡´ ëŒ€ì‹œë³´ë“œë¥¼ ë³µì‚¬?
```

#### ì˜¬ë°”ë¥¸ ë°©ì‹

```
âœ… prometheus.ymlì— íƒ€ê²Ÿë§Œ ì¶”ê°€:

scrape_configs:
  - job_name: 'node-exporter'
    static_configs:
      - targets: ['172.31.50.100:9100']
        labels:
          instance: 'new-server'

â†’ ëŒ€ì‹œë³´ë“œ ë“œë¡­ë‹¤ìš´ì— ìë™ ì¶”ê°€ë¨!
```

### ì‹œë‚˜ë¦¬ì˜¤ 2: ì„œë²„ ê°„ ë¹„êµ

**ìƒí™©**: Kafka vs Microservice ì„œë²„ CPU ì‚¬ìš©ë¥  ë¹„êµ

#### ë°©ë²• 1: Multi-value ë³€ìˆ˜ ì‚¬ìš©

```
Host: [kafka-server, microservice-server â–¼]

â†’ í•˜ë‚˜ì˜ ê·¸ë˜í”„ì— ë‘ ì„œë²„ ë¼ì¸ í‘œì‹œ
```

#### ë°©ë²• 2: Row Repeat ê¸°ëŠ¥

```
ëŒ€ì‹œë³´ë“œ ì„¤ì •:
- Row â†’ Repeat for: $node
- ê° ì„œë²„ë§ˆë‹¤ Row ìë™ ë³µì œ

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ kafka-server    â”‚
â”‚ [CPU] [Memory]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ stress-server   â”‚
â”‚ [CPU] [Memory]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ microservice... â”‚
â”‚ [CPU] [Memory]  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ì‹œë‚˜ë¦¬ì˜¤ 3: í™˜ê²½ë³„ ë¶„ë¦¬ (ë¡œì»¬ vs ìš´ì˜)

**ìƒí™©**: ìš´ì˜ ì„œë²„ë§Œ ë³´ê³  ì‹¶ìŒ

#### Prometheus ë¼ë²¨ í™œìš©

```yaml
# prometheus.prod.yml
scrape_configs:
  - job_name: "node-kafka"
    static_configs:
      - targets: ["172.31.32.89:9100"]
        labels:
          environment: "production" # â† í™˜ê²½ ë¼ë²¨
          instance: "kafka-server"
```

#### ëŒ€ì‹œë³´ë“œ ë³€ìˆ˜ ì¶”ê°€

```
Name: env
Type: Query
Query: label_values(node_uname_info, environment)

â†’ Environment: [production â–¼] ì„ íƒ ê°€ëŠ¥
```

---

## ğŸš« ê·¸ëŒ€ë¡œ ì‚¬ìš© ë¶ˆê°€ëŠ¥í•œ ê²½ìš°

### âš ï¸ ì»¤ìŠ¤í„°ë§ˆì´ì§• í•„ìš”í•œ ìƒí™©

#### 1. ë ˆì´ë¸” ì´ë¦„ì´ ë‹¤ë¥¸ ê²½ìš°

```
Community ëŒ€ì‹œë³´ë“œ ê¸°ëŒ€:
instance="server-name"

ì‹¤ì œ ì„¤ì •:
hostname="server-name"  â† ë‹¤ë¥¸ ë¼ë²¨ëª…

í•´ê²°: ëŒ€ì‹œë³´ë“œ ë³€ìˆ˜ ìˆ˜ì •
- instance â†’ hostnameìœ¼ë¡œ ë³€ê²½
```

#### 2. ë©”íŠ¸ë¦­ ì´ë¦„ì´ ë‹¤ë¥¸ ê²½ìš°

```
í‘œì¤€: node_cpu_seconds_total
ì»¤ìŠ¤í…€: custom_cpu_usage

í•´ê²°: íŒ¨ë„ ì¿¼ë¦¬ ìˆ˜ì • í•„ìš”
```

#### 3. íŠ¹ìˆ˜í•œ ìš”êµ¬ì‚¬í•­

```
ì˜ˆ: íŠ¹ì • ë””ìŠ¤í¬ë§Œ ëª¨ë‹ˆí„°ë§
- ë³€ìˆ˜ì— Regex í•„í„° ì¶”ê°€
- Query ìˆ˜ì •
```

---

## ğŸ¯ ì¶”ì²œ ì›Œí¬í”Œë¡œìš°

### Import í›„ ì¦‰ì‹œ ì‚¬ìš© ê°€ëŠ¥ (90% ì¼€ì´ìŠ¤)

#### Step 1: Prometheus ì„¤ì •

```yaml
scrape_configs:
  - job_name: "node-exporter"
    static_configs:
      - targets:
          - "172.31.32.89:9100"
          - "172.31.46.94:9100"
          - "172.31.43.230:9100"
```

#### Step 2: ëŒ€ì‹œë³´ë“œ Import

```
Grafana â†’ Import â†’ ID: 1860
```

#### Step 3: ë°”ë¡œ ì‚¬ìš©!

```
Host ë“œë¡­ë‹¤ìš´ì—ì„œ ì„œë²„ ì„ íƒ â†’ ë©”íŠ¸ë¦­ í™•ì¸
```

### ë¯¸ì„¸ ì¡°ì • (10% ì¼€ì´ìŠ¤)

#### ë³€ìˆ˜ ì¶”ê°€

```
Settings â†’ Variables â†’ New variable
- Name: datacenter
- Query: label_values(datacenter)
```

#### íŒ¨ë„ í•„í„° ì¶”ê°€

```
ê¸°ì¡´: instance=~"$node"
ìˆ˜ì •: instance=~"$node", datacenter="$datacenter"
```

---

## ğŸ“‹ ì²´í¬ë¦¬ìŠ¤íŠ¸

Import ì „:

- [ ] Prometheus íƒ€ê²Ÿ ì„¤ì • ì™„ë£Œ
- [ ] Node Exporter ëª¨ë“  ì„œë²„ì— ì„¤ì¹˜
- [ ] ë©”íŠ¸ë¦­ ìˆ˜ì§‘ í™•ì¸ (`curl http://IP:9100/metrics`)

Import í›„:

- [ ] ë³€ìˆ˜ ë“œë¡­ë‹¤ìš´ ìƒì„± í™•ì¸
- [ ] ëª¨ë“  ì„œë²„ê°€ ëª©ë¡ì— í‘œì‹œë˜ëŠ”ì§€ í™•ì¸
- [ ] ì„œë²„ ì„ íƒ ì‹œ ë°ì´í„° í‘œì‹œ í™•ì¸
- [ ] Multi-select ì‘ë™ í™•ì¸

ë¬¸ì œ ë°œìƒ ì‹œ:

- [ ] Prometheus íƒ€ê²Ÿ UP ìƒíƒœ í™•ì¸
- [ ] ëŒ€ì‹œë³´ë“œ ë³€ìˆ˜ ì¿¼ë¦¬ í™•ì¸
- [ ] ë¼ë²¨ ì´ë¦„ ì¼ì¹˜ ì—¬ë¶€ í™•ì¸

---

## ğŸ’¡ Pro Tips

### 1. ì¦ê²¨ ì‚¬ìš©í•˜ëŠ” ì„œë²„ ê³ ì •

```
ë³€ìˆ˜ ì„¤ì •:
- Custom options: kafka-server,microservice-server
- Include All option: true

â†’ "All" ì„ íƒ ì‹œ ìì£¼ ë³´ëŠ” ì„œë²„ë§Œ í‘œì‹œ
```

### 2. URLë¡œ ì„œë²„ ì§€ì •

```
ì§ì ‘ ë§í¬ ìƒì„±:
http://localhost:3000/d/rYdddlPWk/node-exporter-full?var-node=kafka-server

â†’ íŠ¹ì • ì„œë²„ ëŒ€ì‹œë³´ë“œ ë°”ë¡œ ì ‘ê·¼
```

### 3. Snapshotìœ¼ë¡œ íŠ¹ì • ì‹œì  ê³µìœ 

```
ì¥ì•  ë°œìƒ ì‹œ:
1. í•´ë‹¹ ì‹œì  ëŒ€ì‹œë³´ë“œ í™•ì¸
2. Share â†’ Snapshot
3. URLì„ ì´ìŠˆ íŠ¸ë˜ì»¤ì— ì²¨ë¶€

â†’ ì¥ì•  ë‹¹ì‹œ ìƒí™© ë³´ì¡´
```

---

## ğŸ‰ ê²°ë¡ 

### âœ… ê·¸ëŒ€ë¡œ ì‚¬ìš© ê°€ëŠ¥!

```
1. Prometheus íƒ€ê²Ÿ ì„¤ì •ë§Œ í•˜ë©´
2. Community ëŒ€ì‹œë³´ë“œ Importë¡œ
3. ëª¨ë“  ì„œë²„ ì¦‰ì‹œ ëª¨ë‹ˆí„°ë§ ê°€ëŠ¥!

ì¶”ê°€ ì„¤ì • í•„ìš” ì—†ìŒ! ğŸš€
```

### ğŸ”§ í•„ìš”ì‹œì—ë§Œ ì»¤ìŠ¤í„°ë§ˆì´ì§•

```
- ë¼ë²¨ ì´ë¦„ ë¶ˆì¼ì¹˜ (5%)
- íŠ¹ìˆ˜í•œ í•„í„°ë§ (3%)
- íšŒì‚¬ í‘œì¤€ ì ìš© (2%)

ëŒ€ë¶€ë¶„ì€ ê·¸ëŒ€ë¡œ ì‚¬ìš©!
```

---

## ğŸ“š ì‹¤ì „ ì˜ˆì‹œ ìŠ¤í¬ë¦½íŠ¸

### í•œ ë²ˆì— í™•ì¸í•˜ê¸°

```bash
#!/bin/bash

echo "ğŸ“Š Prometheus íƒ€ê²Ÿ í™•ì¸"
curl -s http://localhost:9090/api/v1/targets | jq '.data.activeTargets[] | select(.labels.job | contains("node")) | {instance: .labels.instance, health: .health}'

echo ""
echo "ğŸ¨ ëŒ€ì‹œë³´ë“œ Import ì™„ë£Œ í›„:"
echo "1. Grafana â†’ Dashboards"
echo "2. Node Exporter Full ì—´ê¸°"
echo "3. Host ë“œë¡­ë‹¤ìš´ í™•ì¸"
echo ""
echo "ì˜ˆìƒ ê²°ê³¼:"
echo "  - kafka-server"
echo "  - stress-server"
echo "  - microservice-server"
```

**â†’ ëª¨ë‘ ìë™ìœ¼ë¡œ ë‚˜íƒ€ë‚¨!**
